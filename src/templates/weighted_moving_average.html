{% extends "base.html" %}
{% block content %}

{% if mod != "" %}
    {% set ticker = mod.ticker %}
    {% set period = mod.period %}
    {% set length = mod.av_length %}
    {% set money = mod.money %}
    {% set buy = mod.buy %}
    {% set sell = mod.sell %}
    {% set trade_cost = mod.trade_cost %}
{% else %}
    {% set ticker = "" %}
    {% set period = "" %}
    {% set length = "" %}
    {% set money = "" %}
    {% set buy = "" %}
    {% set sell = "" %}
    {% set trade_cost = "" %}
{% endif %}

{% if period == '1mo' %}
    {% set omo = 'selected' %}
{% elif period == '3mo' %}
    {% set tmo = 'selected' %}
{% elif period == '6mo' %}
    {% set smo = 'selected' %}
{% elif period == '1y' %}
    {% set oy = 'selected' %}
{% elif period == '2y' %}
    {% set ty = 'selected' %}
{% elif period == '5y' %}
    {% set fy = 'selected' %}
{% endif %}

<div class="container algo-intro">
    <h1>Weighted moving average algorithm</h1>
    <p>Fill out the form below with the stock information that you would like to run through the algorithm.</p>
    <table id="parameter-explanation" class="table table-striped table-dark">
        <thead>
            <tr>
                <th scope="col">Name</th>
                <th scope="col">Explanation</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th scope="row">Ticker</th>
                <td>Official symbol used for trading on the New York Stock Exchange</td>
            </tr>
            <tr>
                <th scope="row">Period</th>
                <td>Total period over which to run the trading algorithm dating back from the time of execution.</td>
            </tr>
            <tr>
                <th scope="row">Length of average</th>
                <td>Amount of days included in the moving average (ie. 5 day weighted moving average, 10 day weighted moving average, etc.).</td>
            </tr>
            <tr>
                <th scope="row">Account balance</th>
                <td>Beginning balance of available money to be traded.</td>
            </tr>
            <tr>
                <th scope="row">Buy point</th>
                <td>Negative difference from moving average at which to purchase shares if there is money in the account.</td>
            </tr>
            <tr>
                <th scope="row">Sell point</th>
                <td>Positive difference from moving average at which to sell any shares that are currently owned.</td>
            </tr>
            <tr>
                <th scope="row">Cost per trade</th>
                <td>Brokerage fee per transaction. This amount will be charged from the account every time a stock
                is bought or sold.</td>
            </tr>
        </tbody>
    </table>
</div>

<div class="container page-form">
  <form id="stock-data-form" class="stock-data-form" action="/calc/weighted_moving_average" method="post">
    <h3 class="text-center" style="padding-bottom: 20px;">Parameters</h3>
    <div class="form-group">
      <div class="form-group row">
          <label for="ticker" class="col-lg-6 col-form-label">Ticker</label>
          <div class="col-lg-6">
                <input type="text" id="ticker" class="form-control" name="ticker" value="{{ticker}}" required>
          </div>
      </div>
      <div class="form-group row">
          <label for="period" class="col-lg-6 col-form-label">Period</label>
          <div class="col-lg-6">
                <select id="period" class="form-control" name="period">
                    <option {{omo}}>1mo</option>
                    <option {{tmo}}>3mo</option>
                    <option {{smo}}>6mo</option>
                    <option {{oy}}>1y</option>
                    <option {{ty}}>2y</option>
                    <option {{fy}}>5y</option>
                </select>
          </div>
      </div>
      <div class="form-group row">
          <label for="length" class="col-lg-6 col-form-label">Length of average</label>
          <div class="col-lg-6">
              <div class="input-group">
                <input type="number" step="1" id="length" class="form-control" name="length" value="{{length}}" aria-describedby="inputGroupAppend" required>
                <div class="input-group-append">
                  <span class="input-group-text" id="inputGroupAppend">days</span>
                </div>
              </div>
          </div>
      </div>
      <div class="form-group row">
          <label for="money" class="col-lg-6 col-form-label">Account balance</label>
          <div class="col-lg-6">
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroupPrepend">$</span>
                </div>
                <input type="number" step="0.01" id="money" class="form-control" name="money" value="{{money}}" aria-describedby="inputGroupPrepend" required>
              </div>
          </div>
      </div>
      <div class="form-group row">
          <label for="buy" class="col-lg-6 col-form-label">Buy point</label>
          <div class="col-lg-6">
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroupPrepend2">$</span>
                </div>
                <input type="number" step="0.0001" id="buy" class="form-control" name="buy" value="{{buy}}" aria-describedby="inputGroupPrepend2" required>
              </div>
          </div>
      </div>
      <div class="form-group row">
          <label for="sell" class="col-lg-6 col-form-label">Sell point</label>
          <div class="col-lg-6">
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroupPrepend3">$</span>
                </div>
                <input type="number" step="0.0001" id="sell" class="form-control" name="sell" value="{{sell}}" aria-describedby="inputGroupPrepend3" required>
              </div>
          </div>
      </div>
      <div class="form-group row">
          <label for="trade_cost" class="col-lg-6 col-form-label">Cost per trade</label>
          <div class="col-lg-6">
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroupPrepend4">$</span>
                </div>
                <input type="number" step="0.01" id="trade_cost" class="form-control" name="trade_cost" value="{{trade_cost}}" aria-describedby="inputGroupPrepend4" required>
              </div>
          </div>
      </div>
    </div>
    <div class="page-button text-center">
      <button type="submit" class="btn btn-secondary">Submit</button>
    </div>
  </form>
</div>
{% endblock %}
