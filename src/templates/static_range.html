{% extends "base.html" %}
{% block content %}

{% if mod != "" %}
    {% set ticker = mod.ticker %}
    {% set interval = mod.interval %}
    {% set period = mod.period %}
    {% set money = mod.money %}
    {% set buy = mod.buy %}
    {% set sell = mod.sell %}
    {% set trade_cost = mod.trade_cost %}
{% else %}
    {% set ticker = "" %}
    {% set interval = "" %}
    {% set period = "" %}
    {% set money = "" %}
    {% set buy = "" %}
    {% set sell = "" %}
    {% set trade_cost = "" %}
{% endif %}

{% if period == '1d' %}
    {% set od = 'selected' %}
{% elif period == '5d' %}
    {% set fd = 'selected' %}
{% elif period == '1mo' %}
    {% set omo = 'selected' %}
{% elif period == '3mo' %}
    {% set tmo = 'selected' %}
{% elif period == '6mo' %}
    {% set smo = 'selected' %}
{% elif period == '1y' %}
    {% set oy = 'selected' %}
{% endif %}

{% if interval == "1m" %}
    {% set om = 'selected' %}
{% elif interval == "2m" %}
    {% set tm = 'selected' %}
{% elif interval == "5m" %}
    {% set fm = 'selected' %}
{% elif interval == "15m" %}
    {% set ftm = 'selected' %}
{% elif interval == "30m" %}
    {% set ttm = 'selected' %}
{% elif interval == "60m" %}
    {% set stm = 'selected' %}
{% elif interval == "90m" %}
    {% set ntm = 'selected' %}
{% elif interval == "1d" %}
    {% set odi = 'selected' %}
{% endif %}

<div class="container algo-intro">
    <h1>Static Range algorithm</h1>
    <p>Fill out the form below with the stock information that you would like to run through the algorithm.</p>
    <table id="parameter-explanation" class="table table-striped table-dark">
        <thead>
            <tr>
                <th scope="col">Name</th>
                <th scope="col">Explanation</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th scope="row">Ticker</th>
                <td>Official symbol used for trading on the New York Stock Exchange</td>
            </tr>
            <tr>
                <th scope="row">Period</th>
                <td>Total period over which to run the trading algorithm dating back from the time of execution.</td>
            </tr>
            <tr>
                <th scope="row">Interval</th>
                <td>Data intervals within the specified period. Smaller intervals will yield more accurate results,
                 but are not available for longer periods.</td>
            </tr>
            <tr>
                <th scope="row">Account balance</th>
                <td>Beginning balance of available money to be traded.</td>
            </tr>
            <tr>
                <th scope="row">Buy point</th>
                <td>Price at which to purchase shares if there is money in the account.</td>
            </tr>
            <tr>
                <th scope="row">Sell point</th>
                <td>Price at which to sell any shares that are currently owned.</td>
            </tr>
            <tr>
                <th scope="row">Cost per trade</th>
                <td>Brokerage fee per transaction. This amount will be charged from the account every time a stock
                is bought or sold.</td>
            </tr>
        </tbody>
    </table>
</div>
<div class="text-center">
    <p>Note: Intraday intervals not available past 1 month periods. 1 minute intervals not available past 5 day periods.</p>
</div>

<div class="container page-form">
    <form id="stock-data-form" class="stock-data-form" method="POST" action="" enctype="multipart/form-data">
        {{ form.hidden_tag() }}
        <fieldset class="form-group">
            <legend class="border-bottom mb-4">Parameters</legend>
            <div class="form-group row">
                {{ form.ticker.label(class="col-lg-6 col-form-label") }}

                {% if form.ticker.errors %}
                    {{ form.ticker(class="col-lg-6 form-control is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.ticker.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.ticker(class="col-lg-6 form-control") }}
                {% endif %}
            </div>
            <div class="form-group row">
                {{ form.period.label(class="col-lg-6 form-control-label") }}

                {% if form.period.errors %}
                    {{ form.period(class="col-lg-6 form-control is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.period.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.period(class="col-lg-6 form-control") }}
                {% endif %}
            </div>
            <div class="form-group row">
                {{ form.interval.label(class="col-lg-6 form-control-label") }}

                {% if form.interval.errors %}
                    {{ form.interval(class="col-lg-6 form-control is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.interval.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.interval(class="col-lg-6 form-control") }}
                {% endif %}
            </div>
            <div class="form-group row">
                {{ form.money.label(class="col-lg-6 form-control-label") }}

                {% if form.money.errors %}
                    {{ form.money(class="col-lg-6 form-control is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.money.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {% set prepend = '$' %}
                    <div class="col-lg-6 input-group-prepend" style="padding: 0px">
                        <span class="input-group-text">{{ prepend | safe }}</span>
                        {{ form.money(class="form-control") }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group row">
                {{ form.buy.label(class="col-lg-6 form-control-label") }}

                {% if form.buy.errors %}
                    {{ form.buy(class="col-lg-6 form-control is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.buy.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {% set prepend = '$' %}
                    <div class="col-lg-6 input-group-prepend" style="padding: 0px">
                        <span class="input-group-text">{{ prepend | safe }}</span>
                        {{ form.buy(class="form-control") }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group row">
                {{ form.sell.label(class="col-lg-6 form-control-label") }}

                {% if form.sell.errors %}
                    {{ form.sell(class="col-lg-6 form-control is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.sell.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {% set prepend = '$' %}
                    <div class="col-lg-6 input-group-prepend" style="padding: 0px">
                        <span class="input-group-text">{{ prepend | safe }}</span>
                        {{ form.sell(class="form-control") }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group row">
                {{ form.trade_cost.label(class="col-lg-6 form-control-label") }}

                {% if form.trade_cost.errors %}
                    {{ form.trade_cost(class="col-lg-6 form-control is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.trade_cost.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {% set prepend = '$' %}
                    <div class="col-lg-6 input-group-prepend" style="padding: 0px">
                        <span class="input-group-text">{{ prepend | safe }}</span>
                        {{ form.trade_cost(class="form-control") }}
                    </div>
                {% endif %}
            </div>
        </fieldset>
        <div class="form-group text-center">
            {{ form.submit(class="btn btn-secondary") }}
        </div>
    </form>
</div>

{% endblock %}
